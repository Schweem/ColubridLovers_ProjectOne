{% extends 'base.html' %}
{% load static %}

{% block title %}Reading List{% endblock %}

{% block content %}

<!DOCTYPE html>
<!-- This is just a placeholder for now-->
<html>
<head>
    <title>Todo List</title>
    <!-- Link to the Bootstrap CSS for styling -->
    <link rel="stylesheet" href="{% static 'bootstrap_yeti.css' %}">
    <style>
        .add-event-button {
            position: absolute;
            top: 5px;
            right: 10px;
            background-color: #5bc0de;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
            border-radius: 12%;
            
        }
    
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            border: 1px solid #ddd;
            background-color: white;
            display: none;  /* Hide the popup by default */
        }
    
        .popup.active {
            display: block;  /* Show the popup when it has the "active" class */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Todo List</h1>
        <ul class="todo-list">
            <!-- Loop over each todo item in the todos list -->
            {% for todo in todos %}
            <!-- Create a table to display the todo items -->
            <table class="table table-striped">
                <thead>
                    <tr>
                        <!-- Define the table headers -->
                        <th scope="col">Title</th>
                        <th scope="col">Description</th>
                        <th scope="col">Completed</th>
                        <th scope="col">Todo By</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <!-- Display the title, description, and completion status of the current todo item -->
                        <td>{{ todo.title }}</td>
                        <td>{{ todo.description }}</td>
                        <td>{{ todo.completed }}</td>
                        <td>{{todo.date }} {{ todo.time}}</td>
                        <td>
                            <!-- Form to mark the current todo item as completed -->
                            <form method="post" action="{% url 'mark_todo_completed' todo.id %}">
                            {% csrf_token %}
                            <input type="hidden" name="completed" value="True">
                            <button type="submit">Mark as complete</button>
                            </form>
                        </td>
                        <td>        
                            <!-- Form to delete the current todo item -->
                            <form method="post" action="{% url 'delete_todo' todo.id %}">
                                {% csrf_token %}
                                <button type="submit">Delete</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
            {% endfor %}
        </ul>
        <!-- Button to trigger the add item modal -->
        <button class="add-event-button" onclick="togglePopup()">Add Event</button> <!-- copilot is great for everything except for fixing its own mistakes-->
        <!-- Add event popup made by copilot--> 
        <div id="addEventPopup" class="popup">
            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit">Add</button>
                <button type = "close" onclick="togglePopup()">Close</button>
            </form>
        </div>
        <script>
            function togglePopup() {
                var popup = document.getElementById("addEventPopup");
                popup.classList.toggle("active");
            }
        </script>
    <!-- Include jQuery and Bootstrap JS for the modal and other features -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html>

{% endblock %}